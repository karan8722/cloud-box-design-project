<div class="modal-header">
    <h5 class="modal-title">{{ name }}</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body bg-light text-center">
    {% if file_type == 'image' %}
    <img src="{{ url_for('raw_file', filepath=path) }}" class="img-fluid" style="max-height: 80vh;">

    {% elif file_type == 'pdf' %}
    <iframe src="{{ url_for('raw_file', filepath=path) }}" style="width:100%; height:80vh;" frameborder="0"></iframe>

    {% elif file_type == 'text' %}
    <pre class="text-start bg-white p-3 border rounded" style="max-height: 80vh; overflow: auto;">{{ content }}</pre>

    {% elif file_type == 'table' %}
    <div class="table-responsive bg-white p-3 border" style="max-height: 80vh; overflow: auto;">
        {{ content|safe }}
    </div>
    <div class="alert alert-info mt-2">Only the first 50 rows are shown for performance.</div>

    {% else %}
    <div class="py-5">
        <i class="bi bi-file-earmark-x display-1 text-muted"></i>
        <p class="mt-3 lead">Preview not available for this file type.</p>
        <a href="{{ url_for('bulk_action') }}?action=download&selected_files={{ name }}&current_path={{ path|replace(name, '') }}"
            class="btn btn-primary">Download to View</a>
    </div>
    {% endif %}
</div>
<div class="modal-footer">
    <a href="{{ url_for('raw_file', filepath=path) }}" class="btn btn-success" download>Download Full File</a>
</div>